<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,intial-scale=1">
        <title>WebAR</title>
    </head>
    <body style="margin:0px; overflow:hidden;">
        <script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
        <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
<script>
    AFRAME.registerComponent('registerevents', {
        init: function () {
            var marker = this.el;

            // マーカーを検出したイベントの登録
            marker.addEventListener('markerFound', function () {
                var markerId = marker.id;
                console.log('markerFound', markerId);

                // アニメーションの開始
                document.querySelector('#box').emit('markerfound');
            });

            // マーカーを見失ったイベントの登録
            marker.addEventListener('markerLost', function () {
                var markerId = marker.id;
                console.log('markerLost', markerId);

                // アニメーションの停止
                document.querySelector('#box').emit('markerlost');
            });
        }
    });
</script>

        <a-scene embedded arjs="debugUIEnabled:false; sourceType: webcam;">
            <a-marker preset="custom" type='pattern' url="img/pattern-marker.patt" registerevents>

	      <a-image src="img/ms_android1.jpg" width="4" height="8" rotation="-90 0 0" position="0 0 0">

              </a-image>

	      <a-image src="img/ms_android2.jpg" width="4" height="8" rotation="-90 0 0" position="5 0 1">

              </a-image>

	      <a-image src="img/ms_android3.jpg" width="4" height="8" rotation="-90 0 0" position="10 0 2">

              </a-image>

              <a-text id="box" value="アンドロイドのお姉さん" font="fonts/custom-msdf.json" color="#33C3F0" negate="false" rotation="-90 0 0" position="0 2 6" scale="9 9 9">
                <a-animation attribute="position" from="-1 2.5 0" to="-1 2.5 6" dur="2000" begin="markerfound" end="markerlost">
                </a-animation>
              </a-text>

            </a-marker>

            <a-entity camera>
            </a-entity>

　　　　　</a-scene>
    </body>
</html>
